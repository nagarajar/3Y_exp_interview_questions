1. Download keycloak 

2. Open the folder till bin and open the cmd in the current folder

3. Run keycloak - kc.bat start-dev

4. Login as username=admin pass= admin

5. create realm -> name = rems-realm

5.1 create clients: 
	Client ID: realm-client
	Access settings
	Valid redirect URIs: http://localhost:9000/*
			     http://192.168.34.200:9000/*
5.2
Clients -> Create client
	Client ID: resource-server
	Next
	Client authentication : ON
	Authorization : ON
	Standard flow: uncheck
	Direct access grants: uncheck
	Next
	Save
	Credentials: copy client secret
	Replace

	in rems-web 
	package com.cesns.rems.web.util;
	class: WebUtil
		public static final String CLIENT_SECRET = "client secret";
	
6. Create roles 3 roles
	Role Name: manager Desciption: REMS Manager Role
	Role Name: operator Desciption: REMS Operator Role
	Role Name: sengineer Desciption: REMS Service Engineer Role

7. Create Users:
7.1	name: nagaraja
	Credintials:
	set pass: nagaraja -> temp off -> save
	Role Mapping: assign role -> select manager -> assign
7.2	Username: manager
	First name: REMS
	Last name: Manager
	Credintials:
	set pass: manager-> temp off -> save
	Role Mapping: assign role -> select manager -> assign
7.3	Username: operator
	First name: REMS
	Last name: Operator
	Credintials:
	set pass: operator> temp off -> save
	Role Mapping: assign role -> select operator -> assign
7.4	Username: sengineer
	First name: REMS
	Last name: SEngineer
	Credintials:
	set pass: sengineer -> temp off -> save
	Role Mapping: assign role -> select sengineer -> assign
7.5	Username: admin
	First name: REMS
	Last name: Admin
	Credintials:
	set pass: $Admin$ -> temp off -> save
	Role Mapping: assign role -> select below roles
		=> uma_authorization -> Assign
		Note: Select: Filter by client then search for below roles -> assign
		1. manage-users
		2. query-clients
		3. query-realms
		4. query-users
		5. query-groups
		6. impersonation
		7. view-clients
		8. view-authorization

	
8. In api-gateway
	application.yml
	channge: # issuer-uri: http://192.168.34.200:8080/realms/rems-realm
         	   issuer-uri: http://localhost:8080/realms/rems-realm

9. In rems-web
	application.yml
	channge:
          keycloak:
#            issuer-uri: http://192.168.34.200:8080/realms/rems-realm
            issuer-uri: http://localhost:8080/realms/rems-realm

10. In rems-web - change "192.168.34.200" to "localhost"

package com.cesns.rems.web.util;
class: WebUtil

@UtilityClass
public class WebUtil {
//	public static final String API_GATEWAY_BASE_URI = "http://192.168.34.200:8000/";
//	public static final String API_GATEWAY_OANDM_API_BASE_URI = "http://192.168.34.200:8000/oandm-api/api/";
//	public static final String API_GATEWAY_COMMON_API_BASE_URI = "http://192.168.34.200:8000/common-api/api/";
//	public static final String GRANT_TYPE = "client_credentials";
//	public static final String CLIENT_ID = "resource-server";
//	public static final String CLIENT_SECRET = "**********";
//	public static final String ACCESS_TOKEN_URI = "http://192.168.34.200:8080/realms/rems-realm/protocol/openid-connect/token";
//	public static final String ISSUER_URI = "http://192.168.34.200:8080/realms/rems-realm";
	
	public static final String API_GATEWAY_BASE_URI = "http://localhost:8000/";
	public static final String API_GATEWAY_OANDM_API_BASE_URI = "http://localhost:8000/oandm-api/api/";
	public static final String API_GATEWAY_COMMON_API_BASE_URI = "http://localhost:8000/common-api/api/";
	public static final String GRANT_TYPE = "client_credentials";
	public static final String CLIENT_ID = "resource-server";
	public static final String CLIENT_SECRET = "**********";
	public static final String ACCESS_TOKEN_URI = "http://localhost:8080/realms/rems-realm/protocol/openid-connect/token";
	public static final String ISSUER_URI = "http://localhost:8080/realms/rems-realm";
	
	public static final String FORM_MODE="create";
}
